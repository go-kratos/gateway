# This is a gateway config.
name: helloworld
hosts:
  - localhost
  - 127.0.0.1
middlewares:
  - name: logging
    options:
      '@type': type.googleapis.com/gateway.middleware.logging.v1.Logging
endpoints:
  - path: /helloworld/*
    timeout: 1s
    protocol: HTTP
    backends:
      - target: '127.0.0.1:8000'
    middlewares:
    - name: circuitbreaker
      options:
        '@type': type.googleapis.com/gateway.middleware.circuitbreaker.v1.CircuitBreaker
        successRatio: {"success":0.6, "request":"1", "bucket":"10", "window":"3s"}
        backupService: {"endpoint":{"backends":[{"target":"127.0.0.1:8001"}]}}
        assertCondtions:
        - {"by_status_code":"200"}