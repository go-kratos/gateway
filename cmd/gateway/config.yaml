# This is a gateway config.
name: helloworld
version: v1
middlewares:
  - name: tracing
    options:
      '@type': type.googleapis.com/gateway.middleware.tracing.v1.Tracing
      httpEndpoint: 'localhost:4318' # default opentelemetry collector port
  - name: logging
  - name: transcoder
  - name: streamrecorder
endpoints:
  - path: /
    timeout: 1s
    protocol: HTTP
    backends:
      - target: 'www.baidu.com'
        tls: true
    stream: true
  - path: /grpc.examples.echo.Echo/BidirectionalStreamingEcho
    method: POST
    timeout: 10s
    protocol: GRPC
    backends:
      - target: '127.0.0.1:50051'
    stream: true
    retry:
      attempts: 1
      perTryTimeout: 10s
  - path: /ws
    timeout: 10s
    protocol: HTTP
    backends:
      - target: '127.0.0.1:18080'
    stream: true
    retry:
      attempts: 1
      perTryTimeout: 10s
